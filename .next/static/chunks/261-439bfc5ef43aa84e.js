"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{4237:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(5893),i=t(7294),o=t(3742),a=t(7583),l=t(8470);let d="0x941Fc398d9FAebdd9f311011541045A1d66c748E",s="0xC6947c7C7254e022D291D3FC3Acf416d7aD33658",c={chainId:"0x144",chainName:"zkSync Era Mainnet",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.era.zksync.io"],blockExplorerUrls:["https://explorer.zksync.io"]},u=["function balanceOf(address owner) view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","event Transfer(address indexed from, address indexed to, uint256 value)"];function g(e){let{isOpen:n,onClose:t,userAddress:g,onSuccess:p}=e,[h,f]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1),[m,x]=(0,i.useState)(""),[k,w]=(0,i.useState)(null),[z,j]=(0,i.useState)(null);async function F(){if(!window.ethereum){j(!1);return}try{let e=new o.Q(window.ethereum),n=await e.getNetwork(),t=Number(n.chainId);324===t?j(!0):j(!1)}catch(e){console.error("Network check error:",e),j(!1)}}async function C(){if(!window.ethereum){x("MetaMask bulunamadı");return}try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[c]}),await F()}catch(e){console.error("Network switch error:",e),x(e.message||"Ağ değiştirilemedi")}}async function E(){if(g&&window.ethereum)try{let e=new o.Q(window.ethereum),n=new a.CH(d,u,e),t=await n.balanceOf(g),r=await n.decimals(),i=l.bM(t,r);w(i)}catch(e){console.error("Balance load error:",e),w(null)}}async function S(){if(!g){x("C\xfczdan bağlı değil");return}if(!h||0>=parseFloat(h)){x("Ge\xe7erli bir miktar girin");return}if(!1===z){x("L\xfctfen zkSync Era ağına ge\xe7in");return}y(!0),x("");try{if(!window.ethereum)throw Error("MetaMask bulunamadı");let e=new o.Q(window.ethereum),n=await e.getSigner(),r=new a.CH(d,u,n),i=await r.decimals(),c=l.vz(h,i);if(await r.balanceOf(g)<c)throw Error("Yetersiz bakiye. C\xfczdanınızda yeterli NOP token bulunmuyor.");if(!window.confirm("Deposit işlemini onaylıyor musunuz?\n\n"+"G\xf6nderen: ".concat(g.slice(0,6),"...").concat(g.slice(-4),"\n")+"Alıcı: ".concat(s.slice(0,6),"...").concat(s.slice(-4),"\n")+"Miktar: ".concat(h," NOP\n\n")+"Bu işlem geri alınamaz. Devam etmek istiyor musunuz?")){y(!1);return}x("MetaMask'te işlemi onaylayın...");let b=await r.transfer(s,c);x("İşlem g\xf6nderildi, onay bekleniyor...");let m=await b.wait();try{let e=await fetch("".concat("http://localhost:5000","/api/deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:g,amount:h,txHash:m.hash})});if(e.ok){let n=await e.json();n.ok&&console.log("Deposit recorded successfully:",n)}else{let n=await e.json().catch(()=>({}));console.warn("Backend deposit notification failed:",n),alert("⚠️ Deposit başarılı ancak backend bildirimi başarısız oldu. L\xfctfen admin ile iletişime ge\xe7in.\n\nTx Hash: ".concat(m.hash))}}catch(e){console.error("Backend notification failed:",e),alert("⚠️ Deposit başarılı ancak backend bildirimi başarısız oldu. L\xfctfen admin ile iletişime ge\xe7in.\n\nTx Hash: ".concat(m.hash))}f(""),null==p||p(),t()}catch(e){console.error("Deposit error:",e),x(e.message||"Deposit başarısız")}finally{y(!1)}}return((0,i.useEffect)(()=>{n&&g&&(F(),E())},[n,g]),n)?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:t,children:(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:24,maxWidth:480,width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,r.jsx)("h2",{style:{margin:0,fontSize:20,fontWeight:700,color:"#1E2328"},children:"Deposit NOP"}),(0,r.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",fontSize:24,cursor:"pointer",color:"#666",padding:0,width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]}),!1===z&&(0,r.jsxs)("div",{style:{padding:12,background:"#FFF3CD",border:"1px solid #FFC107",borderRadius:8,marginBottom:16,fontSize:13},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"⚠️ Yanlış Ağ"}),(0,r.jsx)("div",{style:{marginBottom:8},children:"L\xfctfen zkSync Era ağına ge\xe7in."}),(0,r.jsx)("button",{onClick:C,style:{background:"#C9A227",color:"#1E2328",border:"none",padding:"8px 16px",borderRadius:6,fontSize:13,fontWeight:600,cursor:"pointer"},children:"zkSync Era'ya Ge\xe7"})]}),null!==k&&(0,r.jsxs)("div",{style:{marginBottom:16,padding:12,background:"#F8FAFC",borderRadius:8,fontSize:13},children:[(0,r.jsx)("div",{style:{color:"#666",marginBottom:4},children:"C\xfczdan Bakiyesi"}),(0,r.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#1E2328"},children:[parseFloat(k).toLocaleString()," NOP"]})]}),(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6,color:"#1E2328"},children:"Miktar (NOP)"}),(0,r.jsx)("input",{type:"number",value:h,onChange:e=>{f(e.target.value),x("")},placeholder:"0.0",disabled:b,onFocus:e=>{e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px"},onBlur:e=>{e.currentTarget.style.outline="none"},style:{width:"100%",padding:"12px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,outline:"none"}}),k&&(0,r.jsx)("button",{onClick:()=>f(k),style:{marginTop:8,padding:"4px 12px",background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:6,fontSize:12,cursor:"pointer",color:"#666"},children:"Max"})]}),(0,r.jsxs)("div",{style:{marginBottom:16,padding:12,background:"#F8FAFC",borderRadius:8,fontSize:12,color:"#666"},children:[(0,r.jsxs)("div",{style:{marginBottom:4},children:[(0,r.jsx)("strong",{children:"Alıcı (Ana Hesap):"})," ",s.slice(0,10),"...",s.slice(-8)]}),(0,r.jsxs)("div",{style:{marginBottom:4},children:[(0,r.jsx)("strong",{children:"Ağ:"})," zkSync Era"]}),(0,r.jsxs)("div",{style:{marginTop:8,padding:8,background:"#FFF3CD",borderRadius:6,fontSize:11,color:"#856404"},children:["⚠️ ",(0,r.jsx)("strong",{children:"Uyarı:"})," Bu işlem geri alınamaz. Sadece g\xfcvendiğiniz adrese g\xf6nderin."]})]}),m&&(0,r.jsx)("div",{style:{padding:12,background:"#FFE5E5",color:"#FF0000",borderRadius:8,marginBottom:16,fontSize:13},children:m}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)("button",{onClick:S,disabled:b||!h||!1===z,style:{flex:1,background:b||!h||!1===z?"#ccc":"#C9A227",color:"#1E2328",border:"none",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:b||!h||!1===z?"not-allowed":"pointer",transition:"all 0.2s"},onFocus:e=>{e.currentTarget.disabled||(e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px")},onBlur:e=>{e.currentTarget.style.outline="none"},children:b?"İşlem yapılıyor...":"Deposit"}),(0,r.jsx)("button",{onClick:t,style:{padding:"12px 24px",background:"#F8FAFC",color:"#1E2328",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:"İptal"})]})]})}):null}},6885:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(5893),i=t(7294),o=t(2138);function a(e){let{isOpen:n,onClose:t,userAddress:a,balance:l,onSuccess:d}=e,[s,c]=(0,i.useState)(""),[u,g]=(0,i.useState)(!1),[p,h]=(0,i.useState)(""),[f,b]=(0,i.useState)("");async function y(){if(!a){h("C\xfczdan bağlı değil");return}if(!s||0>=parseFloat(s)){h("Ge\xe7erli bir miktar girin");return}let e=parseFloat(l.replace(/,/g,"")||"0");if(parseFloat(s)>e){h("Yetersiz bakiye");return}g(!0),h(""),b("");try{let e=(0,o.getApiBase)(),n=await fetch("".concat(e,"/api/withdraw"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:a,amount:parseFloat(s)})}),r=await n.json();if(!n.ok)throw Error(r.error||"Withdraw başarısız");b("Withdraw talebi oluşturuldu (#".concat(r.withdrawalId,"). Admin onayı bekleniyor.")),c(""),null==d||d(),setTimeout(()=>{t()},3e3)}catch(e){console.error("Withdraw error:",e),h(e.message||"Withdraw başarısız")}finally{g(!1)}}return n?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:t,children:(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:24,maxWidth:480,width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,r.jsx)("h2",{style:{margin:0,fontSize:20,fontWeight:700,color:"#1E2328"},children:"Withdraw NOP"}),(0,r.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",fontSize:24,cursor:"pointer",color:"#666",padding:0,width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]}),(0,r.jsxs)("div",{style:{marginBottom:16,padding:12,background:"#F8FAFC",borderRadius:8,fontSize:13},children:[(0,r.jsx)("div",{style:{color:"#666",marginBottom:4},children:"Mevcut Bakiye (Puan)"}),(0,r.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#1E2328"},children:[parseFloat(l.replace(/,/g,"")||"0").toLocaleString()," NOP"]})]}),(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6,color:"#1E2328"},children:"Miktar (NOP Puan)"}),(0,r.jsx)("input",{type:"number",value:s,onChange:e=>{c(e.target.value),h(""),b("")},placeholder:"0.0",disabled:u,onFocus:e=>{e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px"},onBlur:e=>{e.currentTarget.style.outline="none"},style:{width:"100%",padding:"12px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,outline:"none"}}),(0,r.jsx)("button",{onClick:()=>{c(parseFloat(l.replace(/,/g,"")||"0").toString())},style:{marginTop:8,padding:"4px 12px",background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:6,fontSize:12,cursor:"pointer",color:"#666"},children:"Max"})]}),(0,r.jsxs)("div",{style:{marginBottom:16,padding:12,background:"#FFF3CD",borderRadius:8,fontSize:12,color:"#856404"},children:[(0,r.jsx)("strong",{children:"Not:"})," Withdraw talebi admin onayından sonra ana hesaptan (soğuk c\xfczdan) zkSync Era ağında token olarak g\xf6nderilecektir. İşlem geri alınamaz."]}),(0,r.jsxs)("div",{style:{marginBottom:16,padding:12,background:"#E5F7FF",borderRadius:8,fontSize:12,color:"#004085"},children:[(0,r.jsx)("strong",{children:"ℹ️ Bilgi:"})," Withdraw talebi oluşturulduktan sonra bakiyenizden d\xfcş\xfcl\xfcr ve admin onayı beklenir. Admin onayladığında tokenler otomatik olarak c\xfczdanınıza g\xf6nderilir."]}),p&&(0,r.jsx)("div",{style:{padding:12,background:"#FFE5E5",color:"#FF0000",borderRadius:8,marginBottom:16,fontSize:13},children:p}),f&&(0,r.jsx)("div",{style:{padding:12,background:"#E5F7E5",color:"#00AA00",borderRadius:8,marginBottom:16,fontSize:13},children:f}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)("button",{onClick:y,disabled:u||!s,style:{flex:1,background:u||!s?"#ccc":"#C9A227",color:"#1E2328",border:"none",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:u||!s?"not-allowed":"pointer",transition:"all 0.2s"},onFocus:e=>{e.currentTarget.disabled||(e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px")},onBlur:e=>{e.currentTarget.style.outline="none"},children:u?"İşlem yapılıyor...":"Withdraw Talebi Oluştur"}),(0,r.jsx)("button",{onClick:t,style:{padding:"12px 24px",background:"#F8FAFC",color:"#1E2328",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:"İptal"})]})]})}):null}}}]);