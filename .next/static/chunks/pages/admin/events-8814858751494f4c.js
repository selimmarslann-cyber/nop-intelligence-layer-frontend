(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{4864:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/events",function(){return n(5803)}])},7134:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(5893),l=n(7294),s=n(1163),r=n(1664),a=n.n(r);let o=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function d(e){let{children:t}=e,n=(0,s.useRouter)(),[r,a]=(0,l.useState)(""),[d,u]=(0,l.useState)(!0),[h,p]=(0,l.useState)(!1);async function x(){try{let e=await fetch("".concat(o,"/api/admin/me"),{credentials:"include"});if(e.ok){let t=await e.json();a(t.email)}else n.push("/admin/login")}catch(e){n.push("/admin/login")}}async function f(){try{await fetch("".concat(o,"/api/admin/logout"),{method:"POST",credentials:"include"}),n.push("/admin/login")}catch(e){n.push("/admin/login")}}(0,l.useEffect)(()=>{p(!0),x()},[]);let g=n.pathname;return(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"#1E2328",display:"flex"},children:[(0,i.jsx)("aside",{style:{width:d?240:0,background:"rgba(248, 250, 252, 0.05)",backdropFilter:"blur(10px)",borderRight:"1px solid rgba(229, 231, 235, 0.1)",transition:"width 0.3s",overflow:"hidden",position:"fixed",height:"100vh",zIndex:100},children:(0,i.jsxs)("div",{style:{padding:20},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:32},children:[(0,i.jsx)("div",{style:{width:40,height:40,borderRadius:8,background:"linear-gradient(135deg, #C9A227 0%, #B8921F 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:700,color:"#1E2328"},children:"NOP"}),d&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"#F8FAFC"},children:"Admin Panel"}),(0,i.jsx)("div",{style:{fontSize:11,color:"#999"},children:"Intelligence Layer"})]})]}),d&&(0,i.jsxs)("nav",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,i.jsx)(c,{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA",active:"/admin"===g}),(0,i.jsx)(c,{href:"/admin/users",label:"Users",icon:"\uD83D\uDC65",active:"/admin/users"===g}),(0,i.jsx)(c,{href:"/admin/contributions",label:"Contributions",icon:"\uD83D\uDCDD",active:"/admin/contributions"===g}),(0,i.jsx)(c,{href:"/admin/withdraws",label:"Withdraws",icon:"\uD83D\uDCB0",active:"/admin/withdraws"===g}),(0,i.jsx)(c,{href:"/admin/burns",label:"Burn Counter",icon:"\uD83D\uDD25",active:"/admin/burns"===g}),(0,i.jsx)(c,{href:"/admin/events",label:"Boosted Events",icon:"⚡",active:"/admin/events"===g}),(0,i.jsx)(c,{href:"/admin/health",label:"System Health",icon:"\uD83D\uDC9A",active:"/admin/health"===g}),(0,i.jsx)(c,{href:"/admin/ai-monitor",label:"AI Monitor",icon:"\uD83E\uDD16",active:"/admin/ai-monitor"===g})]})]})}),(0,i.jsxs)("div",{style:{flex:1,marginLeft:d?240:0,transition:"margin-left 0.3s",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("header",{style:{background:"rgba(248, 250, 252, 0.05)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(229, 231, 235, 0.1)",padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("button",{onClick:()=>u(!d),style:{padding:"8px",background:"transparent",border:"1px solid rgba(229, 231, 235, 0.2)",borderRadius:6,color:"#F8FAFC",cursor:"pointer",fontSize:18},children:"☰"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,i.jsx)("span",{style:{fontSize:13,color:"#999"},children:h&&r||"Loading..."}),(0,i.jsx)("button",{onClick:f,style:{padding:"8px 16px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:6,fontSize:13,fontWeight:600,cursor:"pointer"},children:"Logout"})]})]}),(0,i.jsx)("main",{style:{flex:1,background:"#F8FAFC",overflow:"auto"},children:t})]})]})}function c(e){let{href:t,label:n,icon:l,active:s}=e;return(0,i.jsxs)(a(),{href:t,style:{display:"flex",alignItems:"center",gap:12,padding:"12px 16px",borderRadius:8,background:s?"rgba(201, 162, 39, 0.2)":"transparent",color:s?"#C9A227":"#F8FAFC",textDecoration:"none",fontSize:14,fontWeight:s?600:400,transition:"all 0.2s"},onMouseEnter:e=>{s||(e.currentTarget.style.background="rgba(201, 162, 39, 0.1)")},onMouseLeave:e=>{s||(e.currentTarget.style.background="transparent")},children:[(0,i.jsx)("span",{children:l}),(0,i.jsx)("span",{children:n})]})}},5803:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(5893),l=n(7294),s=n(1163),r=n(7134);let a=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function o(){let e=(0,s.useRouter)(),[t,n]=(0,l.useState)([]),[o,y]=(0,l.useState)(!0),[b,m]=(0,l.useState)(!1),[v,j]=(0,l.useState)(null),[A,E]=(0,l.useState)({title:"",xMultiplier:"1",startsAt:"",endsAt:"",active:!0});async function S(){try{(await fetch("".concat(a,"/api/admin/me"),{credentials:"include"})).ok||e.push("/admin/login")}catch(t){e.push("/admin/login")}}async function C(){y(!0);try{let e=await fetch("".concat(a,"/api/admin/events"),{credentials:"include"});if(e.ok){let t=await e.json();n(t.items||[])}}catch(e){console.error("Failed to load events:",e)}finally{y(!1)}}async function k(e){e.preventDefault();let t=v?"".concat(a,"/api/admin/events/").concat(v.id):"".concat(a,"/api/admin/events");try{let e=await fetch(t,{method:v?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:A.title,xMultiplier:parseFloat(A.xMultiplier),startsAt:A.startsAt||null,endsAt:A.endsAt||null,active:A.active})});if(e.ok)C(),m(!1),j(null),E({title:"",xMultiplier:"1",startsAt:"",endsAt:"",active:!0}),alert(v?"Event updated":"Event created");else{let t=await e.json();alert(t.error||"Failed to save event")}}catch(e){alert("Failed to save event")}finally{setSubmitting(!1)}}async function D(e){if(confirm("Are you sure you want to delete this event?"))try{(await fetch("".concat(a,"/api/admin/events/").concat(e),{method:"DELETE",credentials:"include"})).ok?(C(),alert("Event deleted")):alert("Failed to delete")}catch(e){alert("Failed to delete")}}return(0,l.useEffect)(()=>{S(),C()},[]),(0,i.jsx)(r.Z,{children:(0,i.jsxs)("div",{style:{padding:24},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[(0,i.jsx)("h1",{style:{margin:0,fontSize:28,fontWeight:700,color:"#1E2328"},children:"Boosted Events"}),(0,i.jsx)("button",{onClick:()=>{m(!0),j(null),E({title:"",xMultiplier:"1",startsAt:"",endsAt:"",active:!0})},style:h,children:"+ Create Event"})]}),b&&(0,i.jsxs)("div",{style:{background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,padding:24,marginBottom:24},children:[(0,i.jsx)("h2",{style:{margin:"0 0 16px 0",fontSize:18,fontWeight:600,color:"#1E2328"},children:v?"Edit Event":"Create New Event"}),(0,i.jsxs)("form",{onSubmit:k,style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6},children:"Title *"}),(0,i.jsx)("input",{type:"text",value:A.title,onChange:e=>E({...A,title:e.target.value}),required:!0,style:g})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6},children:"Multiplier *"}),(0,i.jsx)("input",{type:"number",step:"0.1",min:"1",value:A.xMultiplier,onChange:e=>E({...A,xMultiplier:e.target.value}),required:!0,style:g})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6},children:"Start Date (optional)"}),(0,i.jsx)("input",{type:"datetime-local",value:A.startsAt,onChange:e=>E({...A,startsAt:e.target.value}),style:g})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:6},children:"End Date (optional)"}),(0,i.jsx)("input",{type:"datetime-local",value:A.endsAt,onChange:e=>E({...A,endsAt:e.target.value}),style:g})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,i.jsx)("input",{type:"checkbox",checked:A.active,onChange:e=>E({...A,active:e.target.checked}),id:"active"}),(0,i.jsx)("label",{htmlFor:"active",style:{fontSize:13,fontWeight:600},children:"Active"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{type:"submit",disabled:submitting,style:h,children:submitting?"...":v?"Update":"Create"}),(0,i.jsx)("button",{type:"button",onClick:()=>{m(!1),j(null)},style:p,children:"Cancel"})]})]})]}),o?(0,i.jsx)("div",{style:{padding:40,textAlign:"center",color:"#666"},children:"Loading events..."}):(0,i.jsx)("div",{style:{background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,overflow:"hidden"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{background:"rgba(201, 162, 39, 0.1)",borderBottom:"2px solid #E5E7EB"},children:[(0,i.jsx)("th",{style:c,children:"Title"}),(0,i.jsx)("th",{style:c,children:"Multiplier"}),(0,i.jsx)("th",{style:c,children:"Start"}),(0,i.jsx)("th",{style:c,children:"End"}),(0,i.jsx)("th",{style:c,children:"Status"}),(0,i.jsx)("th",{style:c,children:"Actions"})]})}),(0,i.jsx)("tbody",{children:t.map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #E5E7EB",background:t%2==0?"#fff":"#F8FAFC"},children:[(0,i.jsx)("td",{style:u,children:e.title}),(0,i.jsx)("td",{style:u,children:(0,i.jsxs)("strong",{style:{color:"#C9A227"},children:[e.xMultiplier,"x"]})}),(0,i.jsx)("td",{style:u,children:e.startsAt?new Date(e.startsAt).toLocaleString():"-"}),(0,i.jsx)("td",{style:u,children:e.endsAt?new Date(e.endsAt).toLocaleString():"-"}),(0,i.jsx)("td",{style:u,children:(0,i.jsx)(d,{status:function(e){if(!e.endsAt)return"Active";let t=new Date;return new Date(e.endsAt)<t?"Expired":e.startsAt&&new Date(e.startsAt)>t?"Upcoming":"Active"}(e)})}),(0,i.jsx)("td",{style:u,children:(0,i.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,i.jsx)("button",{onClick:()=>{j(e),E({title:e.title,xMultiplier:e.xMultiplier.toString(),startsAt:e.startsAt?new Date(e.startsAt).toISOString().slice(0,16):"",endsAt:e.endsAt?new Date(e.endsAt).toISOString().slice(0,16):"",active:!1!==e.active}),m(!0)},style:x,children:"Edit"}),(0,i.jsx)("button",{onClick:()=>D(e.id),style:f,children:"Delete"})]})})]},e.id))})]})})]})})}function d(e){let{status:t}=e,n={Active:{bg:"#00AA00",color:"#fff"},Expired:{bg:"#999",color:"#fff"},Upcoming:{bg:"#FFA500",color:"#fff"}},l=n[t]||n.Active;return(0,i.jsx)("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:l.bg+"20",color:l.bg},children:t})}let c={padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:700,color:"#1E2328",textTransform:"uppercase"},u={padding:"12px 16px",fontSize:13,color:"#1E2328"},h={padding:"10px 20px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},p={padding:"10px 20px",background:"transparent",color:"#666",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},x={padding:"4px 12px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer"},f={padding:"4px 12px",background:"#FF0000",color:"#fff",border:"none",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer"},g={width:"100%",padding:"10px 12px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=4864)}),_N_E=e.O()}]);