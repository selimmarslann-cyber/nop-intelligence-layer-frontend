(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{5356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return n(4328)}])},7134:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(5893),s=n(7294),r=n(1163),o=n(1664),l=n.n(o);let a=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function d(e){let{children:t}=e,n=(0,r.useRouter)(),[o,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(!0),[h,x]=(0,s.useState)(!1);async function p(){try{let e=await fetch("".concat(a,"/api/admin/me"),{credentials:"include"});if(e.ok){let t=await e.json();l(t.email)}else n.push("/admin/login")}catch(e){n.push("/admin/login")}}async function g(){try{await fetch("".concat(a,"/api/admin/logout"),{method:"POST",credentials:"include"}),n.push("/admin/login")}catch(e){n.push("/admin/login")}}(0,s.useEffect)(()=>{x(!0),p()},[]);let f=n.pathname;return(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"#1E2328",display:"flex"},children:[(0,i.jsx)("aside",{style:{width:d?240:0,background:"rgba(248, 250, 252, 0.05)",backdropFilter:"blur(10px)",borderRight:"1px solid rgba(229, 231, 235, 0.1)",transition:"width 0.3s",overflow:"hidden",position:"fixed",height:"100vh",zIndex:100},children:(0,i.jsxs)("div",{style:{padding:20},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:32},children:[(0,i.jsx)("div",{style:{width:40,height:40,borderRadius:8,background:"linear-gradient(135deg, #C9A227 0%, #B8921F 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:700,color:"#1E2328"},children:"NOP"}),d&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"#F8FAFC"},children:"Admin Panel"}),(0,i.jsx)("div",{style:{fontSize:11,color:"#999"},children:"Intelligence Layer"})]})]}),d&&(0,i.jsxs)("nav",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,i.jsx)(c,{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA",active:"/admin"===f}),(0,i.jsx)(c,{href:"/admin/users",label:"Users",icon:"\uD83D\uDC65",active:"/admin/users"===f}),(0,i.jsx)(c,{href:"/admin/contributions",label:"Contributions",icon:"\uD83D\uDCDD",active:"/admin/contributions"===f}),(0,i.jsx)(c,{href:"/admin/withdraws",label:"Withdraws",icon:"\uD83D\uDCB0",active:"/admin/withdraws"===f}),(0,i.jsx)(c,{href:"/admin/burns",label:"Burn Counter",icon:"\uD83D\uDD25",active:"/admin/burns"===f}),(0,i.jsx)(c,{href:"/admin/events",label:"Boosted Events",icon:"⚡",active:"/admin/events"===f}),(0,i.jsx)(c,{href:"/admin/health",label:"System Health",icon:"\uD83D\uDC9A",active:"/admin/health"===f}),(0,i.jsx)(c,{href:"/admin/ai-monitor",label:"AI Monitor",icon:"\uD83E\uDD16",active:"/admin/ai-monitor"===f})]})]})}),(0,i.jsxs)("div",{style:{flex:1,marginLeft:d?240:0,transition:"margin-left 0.3s",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("header",{style:{background:"rgba(248, 250, 252, 0.05)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(229, 231, 235, 0.1)",padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("button",{onClick:()=>u(!d),style:{padding:"8px",background:"transparent",border:"1px solid rgba(229, 231, 235, 0.2)",borderRadius:6,color:"#F8FAFC",cursor:"pointer",fontSize:18},children:"☰"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,i.jsx)("span",{style:{fontSize:13,color:"#999"},children:h&&o||"Loading..."}),(0,i.jsx)("button",{onClick:g,style:{padding:"8px 16px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:6,fontSize:13,fontWeight:600,cursor:"pointer"},children:"Logout"})]})]}),(0,i.jsx)("main",{style:{flex:1,background:"#F8FAFC",overflow:"auto"},children:t})]})]})}function c(e){let{href:t,label:n,icon:s,active:r}=e;return(0,i.jsxs)(l(),{href:t,style:{display:"flex",alignItems:"center",gap:12,padding:"12px 16px",borderRadius:8,background:r?"rgba(201, 162, 39, 0.2)":"transparent",color:r?"#C9A227":"#F8FAFC",textDecoration:"none",fontSize:14,fontWeight:r?600:400,transition:"all 0.2s"},onMouseEnter:e=>{r||(e.currentTarget.style.background="rgba(201, 162, 39, 0.1)")},onMouseLeave:e=>{r||(e.currentTarget.style.background="transparent")},children:[(0,i.jsx)("span",{children:s}),(0,i.jsx)("span",{children:n})]})}},4328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(5893),s=n(7294),r=n(1163),o=n(7134);let l=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function a(){let e=(0,r.useRouter)(),[t,n]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),[g,f]=(0,s.useState)(""),[y,b]=(0,s.useState)(1),[j,m]=(0,s.useState)(null),[v,C]=(0,s.useState)(null);async function S(){try{(await fetch("".concat(l,"/api/admin/me"),{credentials:"include"})).ok||e.push("/admin/login")}catch(t){e.push("/admin/login")}}async function E(){c(!0);try{let e=new URLSearchParams({page:y.toString(),limit:"50",...g&&{search:g}}),t=await fetch("".concat(l,"/api/admin/users?").concat(e),{credentials:"include"});if(t.ok){let e=await t.json();n(e.items||[]),m(e.pagination)}}catch(e){console.error("Failed to load users:",e)}finally{c(!1)}}async function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(confirm("Adjust NOP by ".concat(t,"?")))try{let i=await fetch("".concat(l,"/api/admin/users/").concat(e,"/adjust-nop"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:t,reason:n})});if(i.ok)E(),alert("NOP adjusted successfully");else{let e=await i.json();alert(e.error||"Failed to adjust NOP")}}catch(e){alert("Failed to adjust NOP")}}return(0,s.useEffect)(()=>{S(),E()},[y,g]),(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{style:{padding:24},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[(0,i.jsx)("h1",{style:{margin:0,fontSize:28,fontWeight:700,color:"#1E2328"},children:"Users"}),(0,i.jsx)("input",{type:"text",placeholder:"Search by address...",value:g,onChange:e=>{f(e.target.value),b(1)},style:{padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:8,fontSize:14,width:300}})]}),a?(0,i.jsx)("div",{style:{padding:40,textAlign:"center",color:"#666"},children:"Loading users..."}):(0,i.jsxs)("div",{style:{background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,overflow:"hidden"},children:[(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{background:"rgba(201, 162, 39, 0.1)",borderBottom:"2px solid #E5E7EB"},children:[(0,i.jsx)("th",{style:u,children:"ID"}),(0,i.jsx)("th",{style:u,children:"Address"}),(0,i.jsx)("th",{style:u,children:"NOP Points"}),(0,i.jsx)("th",{style:u,children:"Score"}),(0,i.jsx)("th",{style:u,children:"Joined"}),(0,i.jsx)("th",{style:u,children:"Actions"})]})}),(0,i.jsx)("tbody",{children:t.map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #E5E7EB",background:t%2==0?"#fff":"#F8FAFC"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(201, 162, 39, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.background=t%2==0?"#fff":"#F8FAFC"},children:[(0,i.jsxs)("td",{style:h,children:["#",e.id]}),(0,i.jsx)("td",{style:h,children:(0,i.jsx)("code",{style:{fontSize:12,color:"#0040FF"},children:e.address})}),(0,i.jsx)("td",{style:h,children:(0,i.jsx)("strong",{style:{color:"#C9A227"},children:parseFloat(e.balance).toLocaleString()})}),(0,i.jsx)("td",{style:h,children:e.score}),(0,i.jsx)("td",{style:h,children:new Date(e.joinedAt).toLocaleDateString()}),(0,i.jsx)("td",{style:h,children:(0,i.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,i.jsx)("button",{onClick:()=>{let t=prompt("Enter NOP amount to add (negative to subtract):");t&&k(e.id,t)},style:x,children:"\xb1 NOP"}),(0,i.jsx)("button",{onClick:()=>C(e),style:x,children:"View"})]})})]},e.id))})]}),j&&j.totalPages>1&&(0,i.jsxs)("div",{style:{padding:16,display:"flex",justifyContent:"center",gap:8},children:[(0,i.jsx)("button",{onClick:()=>b(Math.max(1,y-1)),disabled:1===y,style:p,children:"← Prev"}),(0,i.jsxs)("span",{style:{padding:"8px 16px",color:"#666"},children:["Page ",y," of ",j.totalPages]}),(0,i.jsx)("button",{onClick:()=>b(Math.min(j.totalPages,y+1)),disabled:y===j.totalPages,style:p,children:"Next →"})]})]}),v&&(0,i.jsx)(d,{user:v,onClose:()=>C(null)})]})})}function d(e){let{user:t,onClose:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:n}),(0,i.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:600,background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,padding:24,zIndex:9999},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:20},children:[(0,i.jsx)("h2",{style:{margin:0,fontSize:20,fontWeight:700,color:"#1E2328"},children:"User Details"}),(0,i.jsx)("button",{onClick:n,style:g,children:"\xd7"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,i.jsx)(c,{label:"ID",value:"#".concat(t.id)}),(0,i.jsx)(c,{label:"Address",value:t.address}),(0,i.jsx)(c,{label:"NOP Points",value:parseFloat(t.balance).toLocaleString()}),(0,i.jsx)(c,{label:"Score",value:t.score.toString()}),(0,i.jsx)(c,{label:"Joined",value:new Date(t.joinedAt).toLocaleString()})]})]})]})}function c(e){let{label:t,value:n}=e;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0"},children:[(0,i.jsxs)("span",{style:{fontSize:13,color:"#666",fontWeight:600},children:[t,":"]}),(0,i.jsx)("span",{style:{fontSize:13,color:"#1E2328"},children:n})]})}let u={padding:"12px 16px",textAlign:"left",fontSize:12,fontWeight:700,color:"#1E2328",textTransform:"uppercase"},h={padding:"12px 16px",fontSize:13,color:"#1E2328"},x={padding:"4px 12px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer"},p={padding:"8px 16px",background:"#C9A227",color:"#1E2328",border:"none",borderRadius:6,fontSize:13,fontWeight:600,cursor:"pointer"},g={width:32,height:32,borderRadius:6,border:"none",background:"transparent",color:"#1E2328",fontSize:20,cursor:"pointer"}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=5356)}),_N_E=e.O()}]);