(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{7868:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Wallet",function(){return n(5310)}])},5310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(5893),i=n(7294);function l(e){let{address:t,onRefresh:n}=e;return(0,r.jsx)("div",{style:{background:"#fff",borderBottom:"1px solid #eee"},children:(0,r.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",padding:"14px 16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:18},children:"Wallet"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,r.jsx)("div",{style:{fontSize:13,color:"#444"},children:t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e.slice(0,6),"…").concat(e.slice(-4)):""}(t):"C\xfczdan bağlı değil"}),(0,r.jsx)("button",{onClick:n,style:s,children:"↻"})]})]})})}let s={background:"#0040FF",color:"#fff",border:"none",padding:"6px 10px",borderRadius:8,cursor:"pointer"};function a(e){let{loading:t,balance:n,staked:i,rewards:l,onClaimClick:s}=e;return(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[(0,r.jsx)(o,{title:"Puan Bakiyesi",value:n,hint:"Site i\xe7i NOP"}),(0,r.jsx)(o,{title:"Staked",value:i,hint:"Stake havuzu"}),(0,r.jsx)(o,{title:"\xd6d\xfcl (puan)",value:l,hint:"Dağıtım algoritmasına g\xf6re birikir",action:{label:"Claim",onClick:s}})]})}function o(e){let{title:t,value:n,hint:i,action:l}=e;return(0,r.jsxs)("div",{style:d,children:[(0,r.jsx)("div",{style:{fontSize:13,color:"#666"},children:t}),(0,r.jsx)("div",{style:{fontSize:24,fontWeight:800,marginTop:6},children:n}),(0,r.jsx)("div",{style:{fontSize:12,color:"#888",marginTop:4},children:i}),l&&(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("button",{onClick:l.onClick,onFocus:e=>{e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px"},onBlur:e=>{e.currentTarget.style.outline="none"},style:c,children:l.label})})]})}let d={background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,padding:16,boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},c={background:"#C9A227",color:"#1E2328",border:"none",padding:"8px 12px",borderRadius:8,cursor:"pointer",fontSize:13,fontWeight:600,transition:"all 0.2s",outline:"none"};({...c});let u=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function x(e){let{address:t,onChanged:n}=e,[l,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)("");async function x(e,t){let n=await fetch("".concat(u).concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error(await n.text());return await n.json()}async function b(){if(!t)return c("C\xfczdan bağlı değil.");let e=Number(l||"0");if(!e||e<=0)return c("Ge\xe7erli miktar gir.");o(!0),c("");try{await x("/api/stake",{address:t,amount:e}),s(""),c("Stake başarılı."),null==n||n()}catch(e){c(h(e))}finally{o(!1)}}async function j(){if(!t)return c("C\xfczdan bağlı değil.");let e=Number(l||"0");if(!e||e<=0)return c("Ge\xe7erli miktar gir.");o(!0),c("");try{await x("/api/unstake",{address:t,amount:e}),s(""),c("Unstake başarılı."),null==n||n()}catch(e){c(h(e))}finally{o(!1)}}return(0,r.jsxs)("div",{style:p,children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)("h3",{style:{margin:0,fontSize:18},children:"Stake"}),(0,r.jsx)("small",{style:{color:"#777"},children:"\xd6d\xfcller puan olarak birikir"})]}),(0,r.jsx)("div",{style:{marginTop:12},children:(0,r.jsx)("input",{value:l,onChange:e=>s(e.target.value),placeholder:"Miktar (puan)",disabled:a,style:f})}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,marginTop:10},children:[(0,r.jsx)("button",{onClick:b,disabled:a||!t,style:g,children:a?"Bekleyin…":"Stake Et (puan→staked)"}),(0,r.jsx)("button",{onClick:j,disabled:a||!t,style:y,children:a?"Bekleyin…":"Unstake (staked→puan)"})]}),d&&(0,r.jsx)("div",{style:{marginTop:8,fontSize:13,color:d.startsWith("Hata")?"red":"#333"},children:d}),(0,r.jsxs)("div",{style:{marginTop:10,fontSize:12,color:"#777"},children:["Not: Bu işlemler ",(0,r.jsx)("b",{children:"site i\xe7i puan"})," \xfczerinde yapılır. Token yalnızca ",(0,r.jsx)("b",{children:"\xe7ekme/yatırma"})," anında hareket eder."]})]})}function h(e){try{return"Hata: "+(e.message||e)}catch(e){return"Hata"}}let p={background:"#fff",border:"1px solid #eaeaea",borderRadius:12,padding:16,boxShadow:"0 6px 18px rgba(0,0,0,.06)"},f={width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:8},g={background:"#0040FF",color:"#fff",border:"none",padding:"10px 12px",borderRadius:8,cursor:"pointer"},y={background:"#f2f2f2",color:"#111",border:"1px solid #ddd",padding:"10px 12px",borderRadius:8,cursor:"pointer"};var b=n(4237),j=n(6885),k=n(4190);let m=(0,n(2138).getApiBase)();function w(){let{address:e,isConnected:t}=(0,k.O)(),[n,s]=(0,i.useState)(!0),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)({balance:"0",staked:"0",rewards:"0",tier:"Tier 0",cooldownEndsAt:null}),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[y,w]=(0,i.useState)([]),[A,z]=(0,i.useState)(!1);async function E(){if(e){s(!0),d("");try{let t=await fetch("".concat(m,"/api/users/").concat(e,"/summary"));if(!t.ok)throw Error(await t.text());let n=await t.json();u(n)}catch(e){d("Wallet bilgileri alınamadı.")}finally{s(!1)}}}async function B(){if(e){z(!0);try{let t=await fetch("".concat(m,"/api/users/").concat(e,"/withdrawals"));if(!t.ok)throw Error("Failed to load withdrawals");let n=await t.json();w(n.items||[])}catch(e){console.error("Failed to load withdrawals:",e)}finally{z(!1)}}}(0,i.useEffect)(()=>{e&&(E(),B())},[e]);let N=()=>{e&&(E(),B())};function _(e){switch(e){case"pending":return"#FFA500";case"processing":return"#0040FF";case"done":return"#00AA00";case"failed":return"#FF0000";default:return"#666"}}return(0,r.jsxs)("div",{style:{background:"#fff",minHeight:"100vh",color:"#111"},children:[(0,r.jsx)(l,{address:e,onRefresh:()=>{E(),B()}}),(0,r.jsxs)("div",{style:{maxWidth:1200,margin:"24px auto",padding:"0 16px"},children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:16,marginBottom:24},children:[(0,r.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,r.jsx)(a,{loading:n,balance:c.balance,staked:c.staked,rewards:c.rewards,onClaimClick:()=>{}}),(0,r.jsx)(x,{address:e||"",onChanged:E})]}),(0,r.jsxs)("div",{style:S,children:[(0,r.jsx)("h3",{style:v,children:"Token İşlemleri"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginTop:12},children:[(0,r.jsx)("button",{onClick:()=>p(!0),disabled:!t||!e,onFocus:e=>{e.currentTarget.disabled||(e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px")},onBlur:e=>{e.currentTarget.style.outline="none"},style:{...C,width:"100%",opacity:t&&e?1:.6,cursor:t&&e?"pointer":"not-allowed"},children:"\uD83D\uDCB0 Deposit NOP"}),(0,r.jsx)("button",{onClick:()=>g(!0),disabled:!t||!e,onFocus:e=>{e.currentTarget.disabled||(e.currentTarget.style.outline="2px solid #C9A227",e.currentTarget.style.outlineOffset="2px")},onBlur:e=>{e.currentTarget.style.outline="none"},style:{...C,width:"100%",background:"#1E2328",color:"#F8FAFC",opacity:t&&e?1:.6,cursor:t&&e?"pointer":"not-allowed"},children:"\uD83D\uDCB8 Withdraw NOP"})]}),(0,r.jsxs)("div",{style:{marginTop:16,padding:12,background:"#F8FAFC",borderRadius:8,fontSize:12,color:"#666"},children:[(0,r.jsxs)("div",{style:{marginBottom:4},children:[(0,r.jsx)("strong",{children:"Ağ:"})," zkSync Era"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Token:"})," NOP (0x941F...748E)"]})]})]})]}),(0,r.jsxs)("div",{style:S,children:[(0,r.jsx)("h3",{style:v,children:"Withdrawal History"}),A?(0,r.jsx)("div",{style:{padding:20,textAlign:"center",color:"#666"},children:"Loading..."}):0===y.length?(0,r.jsx)("div",{style:{padding:20,textAlign:"center",color:"#666"},children:"No withdrawal requests yet"}):(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,r.jsx)("th",{style:F,children:"ID"}),(0,r.jsx)("th",{style:F,children:"Amount"}),(0,r.jsx)("th",{style:F,children:"Fee"}),(0,r.jsx)("th",{style:F,children:"Net Amount"}),(0,r.jsx)("th",{style:F,children:"Status"}),(0,r.jsx)("th",{style:F,children:"Tx Hash"}),(0,r.jsx)("th",{style:F,children:"Created"})]})}),(0,r.jsx)("tbody",{children:y.map(e=>{var t;return(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #f5f5f5"},children:[(0,r.jsxs)("td",{style:T,children:["#",e.id]}),(0,r.jsx)("td",{style:T,children:parseFloat(e.amount).toLocaleString()}),(0,r.jsx)("td",{style:T,children:parseFloat(e.fee).toLocaleString()}),(0,r.jsx)("td",{style:T,children:(0,r.jsx)("strong",{children:parseFloat(e.netAmount).toLocaleString()})}),(0,r.jsx)("td",{style:T,children:(0,r.jsx)("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:_(e.status)+"20",color:_(e.status)},children:e.status.toUpperCase()})}),(0,r.jsx)("td",{style:T,children:e.txHash?(0,r.jsxs)("a",{href:"https://explorer.zksync.io/tx/".concat(e.txHash),target:"_blank",rel:"noopener noreferrer",style:{color:"#0040FF",fontSize:12},children:[e.txHash.slice(0,10),"..."]}):"-"}),(0,r.jsx)("td",{style:T,children:(t=e.createdAt)?new Date(t).toLocaleString():"-"})]},e.id)})})]})})]})]}),(0,r.jsx)(b.Z,{isOpen:h,onClose:()=>p(!1),userAddress:e,onSuccess:N}),(0,r.jsx)(j.Z,{isOpen:f,onClose:()=>g(!1),userAddress:e,balance:c.balance,onSuccess:N})]})}let S={background:"#F8FAFC",border:"1px solid #E5E7EB",borderRadius:8,padding:16,boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},v={margin:0,fontSize:18,marginBottom:12,color:"#1E2328"},C={background:"#C9A227",color:"#1E2328",border:"none",padding:"10px 16px",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600,transition:"all 0.2s",outline:"none"},F={padding:"12px 8px",textAlign:"left",fontSize:12,fontWeight:700,color:"#666",textTransform:"uppercase",letterSpacing:.5},T={padding:"12px 8px",fontSize:13,color:"#111"}}},function(e){e.O(0,[58,261,888,774,179],function(){return e(e.s=7868)}),_N_E=e.O()}]);